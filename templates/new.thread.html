{{ define "content" }}
<section style="margin-top: 170px; margin-bottom: 50px;">
  <form role="form" action="/thread/create" method="post">
    <select name="selection1" id="selection1" required>
      <option value="" disabled selected>Select a category</option>
      <option value="Sports">Sports</option>
      <option value="Movies">Movies</option>
      <option value="Games">Games</option>
      <option value="Other">Other</option>
    </select>
    <select name="selection2" id="selection2" style="display:none;">
      <option value="">None</option>
      <option value="AI-theme">AI-theme</option>
      <option value="Tomorrow-school">Tomorrow-school</option>
      <option value="Creativity">Creativity</option>
      <option value="Miscellaneous">Miscellaneous</option>
    </select>
    <a> pick your category</a>
    <div class="lead">Start a new thread with the following topic</div>
    <div class="form-group">
      <input class="form-control" name="topic" id="topic" required autofocus placeholder="Thread topic here"
        rows="1"></input>
      <textarea class="form-control" name="body" id="body" required placeholder="Thread body here" rows="4"></textarea>
      <br />

      <button class="btn btn-lg btn-primary pull-right" type="submit" id="submitBtn">
        Start this thread
      </button>
    </div>
  </form>
  <script>
    window.addEventListener('DOMContentLoaded', function () {
      document.querySelector("form").addEventListener("submit", function (e) {
        const sel1 = document.getElementById("selection1").value.trim();
        const sel2 = document.getElementById("selection2").value.trim();

        if (sel1 === "" && sel2 === "") {
          e.preventDefault(); // stop form submission
          alert("Please fill at least one of the selections.");
        }
      });

      document.getElementById("selection1").addEventListener("change", function () {
        const selection2 = document.getElementById("selection2");
        selection2.style.display = "";
        selection2.classList.add("active");
      });
      document.getElementById('submitBtn').addEventListener('click', function (e) {
        var topic = document.getElementById('topic').value;
        var body = document.getElementById('body').value;
        var sel1 = document.getElementById('selection1').value;
        // Prevent only whitespace for both fields
        if (!topic.trim()) {
          alert('Thread topic cannot be empty or only spaces.');
          e.preventDefault();
          return;
        }
        if (!body.trim()) {
          alert('Thread body cannot be empty or only spaces.');
          e.preventDefault();
          return;
        }
        if (!sel1) {
          alert('Please select a category.');
          e.preventDefault();
          return;
        }
        // Form will submit if validation passes
      });
    });
  </script>

</section>
{{ end }}