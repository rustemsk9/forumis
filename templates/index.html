{{ define "content" }}
<section style="margin-top: 20px;">
<a href="/" style="text-decoration: none; color: inherit;"></a>
<div id="myBtnContainer">
  <a class="medium">{{.Title}}</a><a class="small" id="name"> {{ .User }} </a><br><a class="small">Total users: {{ .Count }}</a> <a class="small"> Users online: {{ .Online }} </a>
</div>
<div class="container-lg d-flex flex-column justify-content-center" style="padding-left: 125px">
  <p class="lead">
    <a href="/thread/new" style="text-decoration: underline;">Start a thread </a><a> | or join one below!</a>
  </p>
  <form method="post" action="/">
  <select name="selection1" >
    <option value="">Category</option>
    {{ if .PreferedCategory1 }}
      <option value="{{ .PreferedCategory1 }}" selected>{{ .PreferedCategory1 }}</option>
    {{ end }}
    <option value="Sports">Sports</option>
    <option value="Movies">Movies</option>
    <option value="Games">Games</option>
    <option value="Other">Other</option>
  </select>
  <select name="selection2">
    <option value="">Category</option>
    {{ if .PreferedCategory2 }}
      <option value="{{ .PreferedCategory2 }}" selected>{{ .PreferedCategory2 }}</option>
    {{ end }}
    <option value="AI-theme">AI-theme</option>
    <option value="Tomorrow-school">Tomorrow-school</option>
    <option value="Creativity">Creativity</option>
    <option value="Miscellaneous">Miscellaneous</option>
  </select>
  <button type="submit" class="btn btn-primary">Filter</button>
  <a href="/" class="btn btn-secondary">Show All</a>
</form>
  <div class="mb-3 p-2">
    <a href="/" class='btn btn-sm btn-outline-secondary {{ if eq .SortBy "" }}active{{ end }}'>Latest</a>
    <a href="/?sort=likes" class='btn btn-sm btn-outline-secondary {{ if eq .SortBy "likes" }}active{{ end }}'>Most Liked</a>
  </div>
</div>
<!-- <div class="container1"> -->
{{ range .Threads }}

<div class="filterDiv {{ .Category1 }} {{ .Category2 }}">
  {{ .Category1 }}{{ if and .Category1 .Category2 }}, {{ end }}{{ .Category2 }}
  <br>
  <div class="card shadow-sm mb-3" style="border-bottom: solid 2px black;" id="thread-{{ .Id }}">
    <div class="card-header bg-light text-break d-flex justify-content-between">
      <span class="lead"><i class="fa fa-comments-o"> {{ .Topic }}</i></span>
    </div>
    <div class="d-flex justify-content-between gap-2 align-items-center p-2">
      <div class="small">Started by <a class="medium" href="/account?user_id={{.UserId}}" style="text-decoration: underline;">{{ .User }}</a> - {{ .CreatedAtDate }} - {{ .NumReplies }} posts.</div>
      <!-- <div class=""> -->
        <!-- </div> -->
        <div class="d-flex pull-right me-2" style="gap: 1rem;">
          <form method="post" action="/api/thread/{{.Id}}/vote">
            <input type="hidden" name="vote_type" value="like">
            <button type="submit" class="btn py-1 px-1 btn-sm btn-success like-btn">
              <i class="fa fa-thumbs-up"></i> <span id="likes-{{ .Id }}">{{ .LikesCount }}</span>
            </button>
          </form>
          <form method="post" action="/api/thread/{{.Id}}/vote">
            <input type="hidden" name="vote_type" value="dislike">
            <button type="submit" class="btn py-1 px-1 btn-sm btn-danger dislike-btn">
              <i class="fa fa-thumbs-down"></i> <span id="dislikes-{{ .Id }}">{{ .DislikesCount }}</span>
            </button>
          </form>
          <a href="/thread/read?id={{.Id }}" style="text-decoration: underline;">Read more</a>
        </div>
      </div>
    </div>
  </div>
</div>
{{ end }}
</div>
</section>
  
{{ end }}

